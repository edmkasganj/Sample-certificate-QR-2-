<!DOCTYPE html>
<html>
<head>
  <title>Certificate Form</title>
  <style>
    body { font-family: Arial; margin: 40px; }
    input { margin: 5px 0; padding: 8px; width: 300px; }
    button { padding: 10px 20px; }
    #certificate { margin-top: 30px; }
  </style>
</head>
<body>

<h2>Certificate Participation Form</h2>
<form id="certForm">
  <input type="text" name="name" placeholder="Name" required><br>
  <input type="text" name="fatherName" placeholder="Father/Husband Name" required><br>
  <input type="email" name="email" placeholder="Email" required><br>
  <input type="text" name="mobile" placeholder="Mobile No." required><br>
  <button type="submit">Submit</button>
</form>

<div id="certificate"></div>

<script>
const webAppURL = "https://script.google.com/macros/s/AKfycbzEth8d2p4OMJieV-A0JWWjst46LeLVL4edhxD8zzHisAf7awbhkAxVB9kI-J4wiyUfag/exec";

document.getElementById("certForm").addEventListener("submit", async function(e){
  e.preventDefault();
  
  const formData = {
    name: this.name.value,
    fatherName: this.fatherName.value,
    email: this.email.value,
    mobile: this.mobile.value
  };

  const response = await fetch(webAppURL, {
    method: "POST",
    body: JSON.stringify(formData)
  });

  const result = await response.json();

  const certDiv = document.getElementById("certificate");
  if(result.success){
    certDiv.innerHTML = `
      <h3>Certificate Generated</h3>
      <a href="${result.pdfUrl}" target="_blank">Download Certificate PDF</a><br>
      <img src="${result.qrUrl}" alt="QR Code"><br>
      <p>Scan QR to verify your certificate.</p>
    `;
  } else {
    certDiv.innerHTML = `<p style="color:red">Error: ${result.error}</p>`;
  }
});
</script>

</body>
</html>

